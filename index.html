<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>F Crown Store</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{margin:0;font-family:Arial;background:#f4f4f4}
header img{width:100%;max-height:350px;object-fit:cover}
nav{background:#000;padding:12px;text-align:center}
nav a{color:#fff;margin:0 15px;text-decoration:none;font-weight:bold}
nav a:hover{color:red}
.container{max-width:1100px;margin:auto;padding:20px}

/* LOGIN */
#loginBox{background:#fff;padding:15px;border-radius:10px;max-width:350px;margin:auto;margin-bottom:20px;display:none}

/* ADMIN PANEL */
.admin{background:#fff;padding:15px;border-radius:10px;margin-bottom:20px;display:none}

/* PRODUCTS */
.products{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:20px}
.card{background:#fff;border-radius:12px;padding:12px;border:2px solid red;box-shadow:0 4px 12px rgba(0,0,0,.1)}
.card img{width:100%;height:200px;object-fit:cover;border-radius:8px}
.price{font-weight:bold;margin:6px 0}
.btn{padding:10px;border:none;border-radius:6px;cursor:pointer;width:100%}
.buy{background:red;color:#fff}
.buy:hover{background:#c40000}
.cartBtn{background:#000;color:#fff;margin-top:5px}

/* CART */
#cartBox{background:#fff;padding:15px;border-radius:10px;margin-top:20px}
.cartItem{display:flex;justify-content:space-between;margin:5px 0}

/* POPUP */
.popup{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.6);display:none;align-items:center;justify-content:center}
.popupBox{background:#fff;padding:15px;border-radius:10px;width:90%;max-width:400px}

/* FOOTER */
footer{background:#111;color:#ccc;text-align:center;padding:15px;margin-top:20px}
</style>
</head>
<body>

<header>
<img src="1769020865804.jpg">
</header>

<nav>
<a href="#products">Products</a>
<a href="#cart">Cart</a>
<a href="#contact">Contact</a>
<a href="#" onclick="showLogin()">Admin</a>
</nav>

<div class="container">

<!-- LOGIN -->
<div id="loginBox">
<h3>Admin Login</h3>
<input id="adminPass" placeholder="Password">
<button class="btn buy" onclick="login()">Login</button>
</div>

<!-- ADMIN PANEL -->
<div class="admin" id="adminPanel">
<h3>Add Product</h3>
<input id="pname" placeholder="Product Name">
<input id="pprice" type="number" placeholder="Price PKR">
<input id="pimage" type="file">
<button class="btn buy" onclick="addProduct()">Upload Product</button>
</div>

<!-- PRODUCTS -->
<h2 id="products">Products</h2>
<div class="products" id="productList"></div>

<!-- CART -->
<div id="cartBox">
<h3 id="cart">Cart</h3>
<div id="cartItems"></div>
<h4>Total: PKR <span id="totalPrice">0</span></h4>
<button class="btn buy" onclick="checkout()">Checkout</button>
</div>

</div>

<!-- ORDER POPUP -->
<div class="popup" id="orderPopup">
<div class="popupBox">
<h3>Place Order</h3>
<input id="cname" placeholder="Your Name">
<input id="cmobile" placeholder="Mobile Number">
<textarea id="caddress" placeholder="Address"></textarea>
<button class="btn buy" onclick="submitOrder()">Submit</button>
<button class="btn" onclick="closePopup()">Cancel</button>
</div>
</div>

<footer id="contact">
<p>Contact: 0327-6965196</p>
<p>Â© 2026 F Crown</p>
</footer>

<!-- FIREBASE -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>

<script>
/* ðŸ”¥ APNA FIREBASE CONFIG YAHAN DALO */
const firebaseConfig = {
  apiKey: "PASTE_HERE",
  authDomain: "PASTE_HERE",
  projectId: "PASTE_HERE",
  storageBucket: "PASTE_HERE",
  messagingSenderId: "PASTE_HERE",
  appId: "PASTE_HERE"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();
const storage = firebase.storage();

/* ================= ADMIN LOGIN ================= */
const ADMIN_PASSWORD = "12345"; // yahan apna password rakho

function showLogin(){
  document.getElementById("loginBox").style.display="block";
}

function login(){
  if(adminPass.value === ADMIN_PASSWORD){
    alert("Login Success");
    document.getElementById("adminPanel").style.display="block";
    document.getElementById("loginBox").style.display="none";
  }else{
    alert("Wrong Password");
  }
}

/* ================= ADD PRODUCT ================= */
function addProduct(){
  if(!pname.value || !pprice.value || !pimage.files[0]){
    alert("Fill all fields");
    return;
  }

  const file = pimage.files[0];
  const ref = storage.ref("products/" + Date.now() + "_" + file.name);

  ref.put(file).then(snap=>{
    snap.ref.getDownloadURL().then(url=>{
      db.collection("products").add({
        name:pname.value,
        price:pprice.value,
        image:url,
        time: firebase.firestore.FieldValue.serverTimestamp()
      });
    });
  });

  pname.value="";
  pprice.value="";
  pimage.value="";
}

/* ================= LOAD PRODUCTS ================= */
let cart = [];

db.collection("products").orderBy("time","desc").onSnapshot(snapshot=>{
  productList.innerHTML="";
  snapshot.forEach(doc=>{
    const d = doc.data();
    productList.innerHTML += `
      <div class="card">
        <img src="${d.image}">
        <h3>${d.name}</h3>
        <p class="price">PKR ${d.price}</p>
        <button class="btn buy" onclick="addToCart('${d.name}',${d.price})">Add to Cart</button>
      </div>
    `;
  });
});

/* ================= CART SYSTEM ================= */
function addToCart(name,price){
  cart.push({name,price});
  renderCart();
}

function renderCart(){
  cartItems.innerHTML="";
  let total=0;
  cart.forEach((item,i)=>{
    total+=item.price;
    cartItems.innerHTML += `
      <div class="cartItem">
        <span>${item.name}</span>
        <span>PKR ${item.price}</span>
      </div>
    `;
  });
  totalPrice.innerText=total;
}

function checkout(){
  if(cart.length==0){
    alert("Cart empty");
    return;
  }
  orderPopup.style.display="flex";
}

function closePopup(){
  orderPopup.style.display="none";
}

/* ================= SAVE ORDER ================= */
function submitOrder(){
  if(!cname.value || !cmobile.value || !caddress.value){
    alert("Fill all fields");
    return;
  }

  let orderData = {
    customerName: cname.value,
    mobile: cmobile.value,
    address: caddress.value,
    items: cart,
    total: cart.reduce((s,i)=>s+i.price,0),
    time: firebase.firestore.FieldValue.serverTimestamp()
  };

  db.collection("orders").add(orderData);

  let msg = "New Order:%0A";
  cart.forEach(i=> msg += i.name + " - PKR " + i.price + "%0A");
  msg += "Total: PKR " + orderData.total + "%0A";
  msg += "Name: " + cname.value + "%0AMobile: " + cmobile.value + "%0AAddress: " + caddress.value;

  window.open("https://wa.me/923276965196?text="+msg,"_blank");

  cart=[];
  renderCart();
  closePopup();
  alert("Order Submitted!");
}
</script>

</body>
  </html>
